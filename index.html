<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mudfish Server</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/png" href="/mud.png">
</head>
<body>
  <main class="page">
    <header class="page__header">
      <h1 class="page__title">Mudfish 伺服器狀態儀表板</h1>
      <p class="page__subtitle">查看全球節點狀態，並依位置與國家前綴快速篩選。</p>
    </header>

    <section class="controls" aria-label="資料篩選">
      <div class="controls__group controls__group--lang">
        <label for="langSelect" class="controls__label">語言</label>
        <select id="langSelect" class="controls__select" aria-label="語言">
          <option value="zh">中文</option>
          <option value="en">English</option>
          <option value="ja">日本語</option>
          <option value="ko">한국어</option>
        </select>
      </div>
      <div class="controls__group">
        <label for="locationFilter" class="controls__label">供應商篩選</label>
        <select id="locationFilter" class="controls__select">
          <option value="all">全部供應商</option>
        </select>
      </div>
      <div class="controls__group controls__group--search">
        <label for="searchInput" class="controls__label">關鍵字搜尋</label>
        <input type="search" id="searchInput" class="controls__search" placeholder="主機名或 IP" aria-label="輸入主機名或 IP 搜尋">
      </div>
      <div class="controls__group controls__group--countries">
        <button id="countryToggle" class="country-filter__toggle" type="button" aria-expanded="false" aria-controls="countryFilter">
          國家前綴（全部）
        </button>
        <div id="countryFilter" class="country-filter" role="group" aria-label="依國家前綴篩選" hidden></div>
      </div>
      <div class="controls__group controls__group--load">
        <span class="controls__label">系統負載篩選</span>
        <div class="load-filter" role="group" aria-label="系統負載數值篩選">
          <label class="load-filter__field" for="cpuMaxFilter">CPU ≤
            <input type="number" id="cpuMaxFilter" class="load-filter__input" min="0" step="1" placeholder="任意">
          </label>
          <label class="load-filter__field" for="ioMaxFilter">IO ≤
            <input type="number" id="ioMaxFilter" class="load-filter__input" min="0" step="1" placeholder="任意">
          </label>
          <label class="load-filter__field" for="nicMaxFilter">錯誤 ≤
            <input type="number" id="nicMaxFilter" class="load-filter__input" min="0" step="1" placeholder="任意">
          </label>
          <label class="load-filter__field" for="congestionMaxFilter">擁擠 ≤
            <input type="number" id="congestionMaxFilter" class="load-filter__input" min="0" step="1" placeholder="任意">
          </label>
          <button id="bestServerBtn" class="action-button" type="button">最佳伺服器</button>
          <button id="resetFiltersBtn" class="action-button" type="button">重置篩選</button>
          <button id="downloadSocks5Btn" class="action-button" type="button">Socks5 設定檔下載</button>
        </div>
      </div>
    </section>

    <section class="table-wrapper" aria-live="polite">
      <table class="status-table" id="serverTable">
        <thead>
          <tr>
            <th scope="col" data-sort-key="region">位置</th>
            <th scope="col" data-sort-key="provider">供應商</th>
            <th scope="col" data-sort-key="ip">IPv4</th>
            <th scope="col" data-sort-key="sid">節點 SID</th>
            <th scope="col" data-sort-key="cpuLoad">CPU %</th>
            <th scope="col" data-sort-key="ioWait">IO 等待 %</th>
            <th scope="col" data-sort-key="nicError">網卡錯誤數</th>
            <th scope="col" data-sort-key="network">流量 (MB)</th>
            <th scope="col" data-sort-key="congestion">擁擠度</th>
          </tr>
        </thead>
        <tbody id="tableBody">
          <tr>
            <td colspan="9" class="status-table__placeholder">正在載入資料…</td>
          </tr>
        </tbody>
      </table>
    </section>

  </main>

  <!-- Socks5 帳號密碼設定 Modal -->
  <div id="socks5Modal" class="modal" hidden>
    <div class="modal__overlay"></div>
    <div class="modal__container">
      <div class="modal__header">
        <h2 class="modal__title">Socks5 帳號密碼設定</h2>
        <button id="socks5ModalClose" class="modal__close" type="button" aria-label="關閉對話框">×</button>
      </div>
      <div class="modal__body">
        <div class="modal__field">
          <label for="socks5Username" class="modal__label">帳號</label>
          <input type="text" id="socks5Username" class="modal__input" placeholder="請輸入 Socks5 帳號">
        </div>
        <div class="modal__field">
          <label for="socks5Password" class="modal__label">密碼</label>
          <input type="password" id="socks5Password" class="modal__input" placeholder="請輸入 Socks5 密碼">
        </div>
        <div class="modal__field">
          <label for="socks5Port" class="modal__label">連接埠</label>
          <input type="number" id="socks5Port" class="modal__input" placeholder="預設 18081" value="18081" min="1" max="65535">
        </div>
      </div>
      <div class="modal__footer">
        <button id="socks5ModalCancel" class="modal__button modal__button--secondary" type="button">取消</button>
        <button id="socks5ModalDownload" class="modal__button modal__button--primary" type="button">下載設定檔</button>
      </div>
    </div>
  </div>


  <script src="js/app.js" type="module"></script>
</body>
</html>
